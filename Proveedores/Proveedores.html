<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Proveedores</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .card-product {
        transition: transform 0.3s ease;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        height: 350px;
        margin-bottom: 20px;
      }

      .card-product:hover {
        transform: scale(1.05);
      }

      .card-body {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        text-align: center;
      }

      .card-img-top {
        object-fit: contain;
        max-height: 150px;
      }

      .card-title {
        font-size: 1.25rem;
        margin-bottom: 15px;
      }

      .card-text {
        font-size: 1.1rem;
      }

      .btn-sm {
        padding: 8px 12px;
      }

      .diamond-button {
        background: linear-gradient(45deg, #00d2ff, #3a7bd5);
        color: white;
        font-weight: bold;
        border-radius: 5px;
        padding: 8px 16px;
        border: none;
        text-transform: uppercase;
        cursor: pointer;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
      }

      .diamond-button:hover {
        background: linear-gradient(45deg, #3a7bd5, #00d2ff);
        box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.2);
      }

      .bg-info-light {
        background-color: #d1ecf1;
      }

      .error-message {
        color: red;
        font-size: 14px;
      }
      .whatsapp-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
      }

      /* Estilo para el icono de WhatsApp */
      .whatsapp-icon {
        background-color: #25d366;
        border-radius: 50%;
        padding: 15px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        transition: transform 0.3s ease;
        text-align: center;
      }

      /* Efecto al pasar el mouse sobre el icono */
      .whatsapp-icon:hover {
        transform: scale(1.1);
      }

      /* Estilo para el texto de la información que aparece al pasar el cursor */
      .whatsapp-text {
        display: none;
        position: absolute;
        bottom: 50px;
        right: 80px;
        background-color: #333;
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 14px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
        opacity: 0.8;
      }

      /* Mostrar el texto al pasar el cursor */
      .whatsapp-container:hover .whatsapp-text {
        display: block;
      }

      /* Estilo para el icono de WhatsApp */
      .whatsapp-icon img {
        width: 50px;
        height: 50px;
      }

      /* Estilo para el botón con icono de flecha */
      .back-button-icon {
        position: absolute;
        top: 10px;
        left: 30px; /* Mover más a la derecha */
        z-index: 1000;
        font-size: 24px; /* Reducir el tamaño del icono */
        cursor: pointer;
        transition: transform 0.3s ease, background-color 0.3s ease;
      }

      .back-button-icon:hover {
        transform: scale(1.1); /* Agrandar cuando el usuario pasa el cursor */
      }
    </style>
  </head>
  <body>
    <!-- Botón con icono de flecha para regresar al inicio --->
    <a href="/Hero_Tech/index.html">
      <img
        class="back-button-icon"
        src="https://img.icons8.com/?size=100&id=11538&format=png&color=000000"
        alt="Regresar a la página principal"
      />
    </a>
    <div class="container mt-5">
      <!-- Servicios Section -->
      <h2 class="text-center mb-4">
        Servicios
        <img
          width="48"
          height="48"
          src="https://img.icons8.com/color-glass/48/service.png"
          alt="service"
        />
      </h2>

      <!-- Lista desplegable de servicios -->
      <div class="card">
        <div class="card-header bg-primary text-white">
          Lista de Proveedores
        </div>
        <div class="card-body">
          <button
            class="btn btn-secondary dropdown-toggle"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#servicesList"
            aria-expanded="false"
            aria-controls="servicesList"
          >
            Mis Servicios
          </button>
          <div class="collapse mt-3" id="servicesList">
            <ul class="list-group">
              <li class="list-group-item">
                Reparación de dispositivos electrónicos
              </li>
              <li class="list-group-item">
                Mantenimiento preventivo y correctivo
              </li>
              <li class="list-group-item">Recuperación de datos</li>
              <li class="list-group-item">
                Instalación de sistemas operativos
              </li>
              <li class="list-group-item">
                Actualización de software y hardware
              </li>
              <li class="list-group-item">
                Limpieza interna y externa de dispositivos
              </li>
              <li class="list-group-item">Diagnóstico y presupuesto</li>
              <li class="list-group-item">
                Configuración de redes y periféricos
              </li>
            </ul>
          </div>
        </div>
      </div>
      <hr />

      <!-- Dispositivos Electrónicos y Servicios -->
      <h5 class="mt-4">Dispositivos Electrónicos y Servicios</h5>
      <div class="row gy-3">
        <!-- Producto 1: Reparación de Celulares -->
        <div class="col-md-4">
          <div class="card card-product">
            <img
              src="https://mobidoc.com.ar/wp-content/uploads/2020/10/reparacio%CC%81n-en-30-min.svg"
              class="card-img-top"
              alt="Reparación de Celulares"
            />
            <div class="card-body">
              <h5 class="card-title">Reparación de Celulares</h5>
              <p class="card-text" id="price1">S/ 150</p>
              <div class="d-flex justify-content-around">
                <!-- <button class="btn btn-primary btn-sm" onclick="addToCart()">Comprar</button>-->
                <button
                  class="btn btn-primary btn-sm"
                  onclick="purchaseProduct('Reparación de Celulares', 150)"
                >
                  Comprar
                </button>
                <button
                  class="diamond-button btn-sm"
                  data-bs-toggle="modal"
                  data-bs-target="#couponModal"
                  onclick="setProductId(1)"
                >
                  Usar Cupón
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Producto 2: Reparación de Laptops -->
        <div class="col-md-4">
          <div class="card card-product">
            <img
              src="https://dplnews.com/wp-content/uploads/2024/01/dplnews_Zenbook-DUO-asus_mc9124.png"
              class="card-img-top"
              alt="Reparación de Laptops"
            />
            <div class="card-body">
              <h5 class="card-title">Reparación de Laptops</h5>
              <p class="card-text" id="price2">S/ 300</p>
              <div class="d-flex justify-content-around">
                <!--<button class="btn btn-primary btn-sm" onclick="addToCart()">Comprar</button> -->
                <button
                  class="btn btn-primary btn-sm"
                  onclick="purchaseProduct('Reparación de Laptops', 300)"
                >
                  Comprar
                </button>
                <button
                  class="diamond-button btn-sm"
                  data-bs-toggle="modal"
                  data-bs-target="#couponModal"
                  onclick="setProductId(2)"
                >
                  Usar Cupón
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Producto 3: Reparación de Tablets -->
        <div class="col-md-4">
          <div class="card card-product">
            <img
              src="https://estaticos-cdn.prensaiberica.es/clip/785109cd-fdc6-421f-9730-97971cad5ef9_16-9-discover-aspect-ratio_default_0.jpg"
              class="card-img-top"
              alt="Reparación de Tablets"
            />
            <div class="card-body">
              <h5 class="card-title">Reparación de Tablets</h5>
              <p class="card-text" id="price3">S/ 200</p>
              <div class="d-flex justify-content-around">
                <!--<button class="btn btn-primary btn-sm" onclick="addToCart()">Comprar</button> -->
                <button
                  class="btn btn-primary btn-sm"
                  onclick="purchaseProduct('Reparación de Tablets', 200)"
                >
                  Comprar
                </button>
                <button
                  class="diamond-button btn-sm"
                  data-bs-toggle="modal"
                  data-bs-target="#couponModal"
                  onclick="setProductId(3)"
                >
                  Usar Cupón
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Producto 4: Recuperación de Datos -->
        <div class="col-md-4">
          <div class="card card-product">
            <img
              src="https://mlfk3cv5yvnx.i.optimole.com/cb:bn-b.2fe21/w:1200/h:627/q:mauto/f:best/https://www.ninjaone.com/wp-content/uploads/2023/10/N1-0665-Hard-Drive-Data-Recovery-blog-image.png"
              class="card-img-top"
              alt="Recuperación de Datos"
            />
            <div class="card-body">
              <h5 class="card-title">Recuperación de Datos</h5>
              <p class="card-text" id="price4">S/ 400</p>
              <div class="d-flex justify-content-around">
                <!--<button class="btn btn-primary btn-sm" onclick="addToCart()">Comprar</button> -->
                <button
                  class="btn btn-primary btn-sm"
                  onclick="purchaseProduct('Reparación de Datos', 400)"
                >
                  Comprar
                </button>
                <button
                  class="diamond-button btn-sm"
                  data-bs-toggle="modal"
                  data-bs-target="#couponModal"
                  onclick="setProductId(4)"
                >
                  Usar Cupón
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Producto 5: Instalación de Sistemas Operativos -->
        <div class="col-md-4">
          <div class="card card-product">
            <img
              src="https://proytec.com.pa/wp-content/uploads/2021/08/Proytec_Imagen11.jpg"
              class="card-img-top"
              alt="Instalación de Sistemas Operativos"
            />
            <div class="card-body">
              <h5 class="card-title">Instalación de Sistemas Operativos</h5>
              <p class="card-text" id="price5">S/ 120</p>
              <div class="d-flex justify-content-around">
                <!--<button class="btn btn-primary btn-sm" onclick="addToCart()">Comprar</button> -->
                <button
                  class="btn btn-primary btn-sm"
                  onclick="purchaseProduct('Reparación de Sistemas Operativos', 120)"
                >
                  Comprar
                </button>
                <button
                  class="diamond-button btn-sm"
                  data-bs-toggle="modal"
                  data-bs-target="#couponModal"
                  onclick="setProductId(5)"
                >
                  Usar Cupón
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para seleccionar cupon -->
    <div
      class="modal fade"
      id="couponModal"
      tabindex="-1"
      aria-labelledby="couponModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="couponModalLabel">
              Seleccionar Descuento
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p>Selecciona el porcentaje de descuento:</p>
            <button
              class="btn btn-success w-100"
              onclick="showPromoCodeInput(10)"
            >
              10% Descuento
            </button>
            <button
              class="btn btn-warning w-100 mt-2"
              onclick="showPromoCodeInput(20)"
            >
              20% Descuento
            </button>
            <button
              class="btn btn-danger w-100 mt-2"
              onclick="showPromoCodeInput(30)"
            >
              30% Descuento
            </button>
            <!-- Input para ingresar código promocional -->
            <div id="promoCodeDiv" class="mt-3" style="display: none">
              <input
                type="text"
                id="promoCodeInput"
                class="form-control"
                placeholder="Ingresar código promocional"
              />
              <p id="error-message" class="error-message"></p>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cerrar
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="applyDiscountWithPromo()"
            >
              Aplicar Descuento
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      let selectedProductId = null;
      let selectedDiscount = 0;

      
      async function purchaseProduct(description, price) {
        const apiUrl = "https://api-sbx.dlocalgo.com/v1/payments";

        // Configuración del cuerpo del mensaje
        const paymentData = {
          currency: "PEN",
          amount: price,
          country: "PE",
          description: description,
          success_url: "https://obj-clear.github.io/Hero_Tech/",
          back_url: "https://obj-clear.github.io/Hero_Tech/",
          notification_url: "",
        };

        // Configuración de la solicitud
        const options = {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: "Bearer VKYNLGEWJKwHyAUHPatgfSYpzqZfxyOj:CUCqbIEELt5mFIOpzpU8CnHqF7CUoml1mQ80sZ6g",
          },
          body: JSON.stringify(paymentData),
        };

        try {
          const response = await fetch(apiUrl, options);

          if (!response.ok) {
            throw new Error(`Error en el pago: ${response.statusText}`);
          }

          const result = await response.json();
          console.log("Pago realizado con éxito:", result);

          // Redirigir a la URL de éxito
          window.location.href = result.success_url;
        } catch (error) {
          console.error("Error al procesar el pago:", error);
          alert(
            "Ocurrió un error al realizar el pago. Por favor, inténtelo de nuevo."
          );
        }
      }

      // Establecer el ID del producto seleccionado
      function setProductId(id) {
        selectedProductId = id;
      }

      // Mostrar campo para ingresar código promocional
      function showPromoCodeInput(discount) {
        selectedDiscount = discount;
        document.getElementById("promoCodeDiv").style.display = "block";
        document.getElementById("error-message").textContent = ""; // Limpiar mensaje de error
      }

      // Función para aplicar el descuento con el código promocional
      function applyDiscountWithPromo() {
        let promoCode = document
          .getElementById("promoCodeInput")
          .value.trim()
          .toLowerCase();
        if (promoCode === "herotech") {
          applyDiscount(selectedDiscount);
          const modal = bootstrap.Modal.getInstance(
            document.getElementById("couponModal")
          );
          modal.hide();
        } else {
          document.getElementById("error-message").textContent =
            "Código promocional expirado o no válido";
        }
      }

      // Aplicar el descuento
      function applyDiscount(discount) {
        let priceElement = document.getElementById("price" + selectedProductId);
        let originalPrice = parseFloat(
          priceElement.innerText.replace("S/ ", "")
        );
        let newPrice = originalPrice * (1 - discount / 100);
        priceElement.innerText = "S/ " + newPrice.toFixed(2);
      }
    </script>

    <!-- Contenedor para el ícono de WhatsApp -->
    <div class="whatsapp-container">
      <a href="https://wa.me/51933313409" target="_blank">
        <div class="whatsapp-icon">
          <img
            src="https://i.blogs.es/ea16f3/650_1000_whatsapp/450_1000.png"
            alt="WhatsApp"
          />
        </div>
      </a>
      <!-- Texto que aparece al pasar el cursor sobre el ícono -->
      <div class="whatsapp-text">Click para consulta personalizada</div>
    </div>
  </body>
</html>

