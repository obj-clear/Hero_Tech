<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Login</title>
    <link rel="shortcut icon" href="../img/logo.png">
    
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="stylesheet" href="css/font-awesome.css">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QMWdTlcCqzMZAAIEX8c8F6g23TwG5OTV0Cjh+42AdBj1eKxHjI8N7lLRdVhM33f4" crossorigin="anonymous">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

    <!-- Scripts -->
    <script src="js/jquery-3.2.1.js"></script>
    <script src="js/script.js"></script>
    <script src="main.js" defer type="module"></script>

    <!-- Estilos personalizados para el botón -->
    <style>
        .google-button {
            width: 100%; /* Botón más ancho */
            max-width: 400px; /* Tamaño máximo */
            font-size: 16px; /* Tamaño del texto */
            padding: 10px 20px; /* Espaciado interno */
            border-radius: 5px; /* Bordes redondeados */
            margin-top: 10px; /* Espaciado superior */
        }
        .google-button:hover {
            background-color: #0b5ed7; /* Azul más oscuro */
            color: #fff; /* Texto blanco en hover */
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <img src="../img/logo.png" class="logo" alt="Mi Logo">
            <ul class="menu">
                <li><a href="../index.html">HOME</a></li>
                <li><a href="../Formulario_pedido/PedidoHeroTech.html">HACER UN PEDIDO</a></li>
                <li><a href="../SobreNosotros.html">SOBRE NOSOTROS</a></li>
                <li><a href="../Formulario_login/Login.html">LOGIN</a></li>
            </ul>
            <div class="menu-bar">
                <i class="fa-solid fa-bars"></i>
            </div>
        </nav>
    </header>

    <section class="form_wrap">
        <section class="cantact_info">
            <section class="info_title">
                <span class="fa fa-id-card-o"></span>
                <h2>Formulario<br>Login</h2>
            </section>
        </section>

        <form action="enviar.php" method="post" class="form_contact">
            <h2>Bienvenido al Formulario de Registro</h2>
            <div class="user_info">
                <label for="names">Usuario *(Debe contener entre 5 y 15 caracteres)</label>
                <input type="text" id="names" name="usuario" required minlength="5" maxlength="15">

                <label for="phone">Contraseña *(Debe tener entre 8 y 16 caracteres, al menos un dígito, una minúscula y una mayúscula)</label>
                <input type="password" id="phone" name="contraseña" required pattern="^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$">

                <input type="submit" value="Login" id="btnSend" class="btn btn-success">
                <div>
                    <!-- Botón de Google estilizado -->
                    <button id="google-login-btn" class="btn btn-primary google-button d-flex align-items-center justify-content-center">
                        <i class="fab fa-google me-3"></i> Login with Google
                    </button>
                </div>
            </div>
        </form>
    </section>

    <!-- Modal de Bootstrap -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="successModalLabel">Autenticación Exitosa</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Te has autenticado correctamente.</p>
                </div>
                <div class="modal-footer">
                    <button id="close-modal-btn" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script de autenticación -->
    <script>
        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        auth.languagecode = 'en';

        const provider = new GoogleAuthProvider();

        const googleLogin = document.getElementById("google-login-btn");
        googleLogin.addEventListener("click", function(event) {
            event.preventDefault(); // Evita que el formulario se envíe
            signInWithPopup(auth, provider)
                .then((result) => {
                    const user = result.user;
                    console.log(user);

                    // Mostrar modal de éxito
                    const modal = new bootstrap.Modal(document.getElementById("successModal"));
                    modal.show();

                    // Redirigir al index al cerrar el modal
                    document.getElementById("close-modal-btn").addEventListener("click", () => {
                        window.location.href = "../index.html";
                    });
                })
                .catch((error) => {
                    console.error("Error de autenticación:", error);
                });
        });
    </script>
</body>
</html>

